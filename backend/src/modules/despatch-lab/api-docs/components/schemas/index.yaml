# Authentication Schemas
AuthCredentials:
  type: object
  required:
    - key
    - secret
  properties:
    key:
      type: string
      description: Username/email for authentication
    secret:
      type: string
      description: Password for authentication
      format: password

TokenResponse:
  type: object
  properties:
    tokens:
      type: object
      properties:
        access:
          type: string
          description: JWT access token
        refresh:
          type: string
          description: JWT refresh token

ImpersonateRequest:
  type: object
  required:
    - customerId
    - refreshToken
  properties:
    depotId:
      type: string
      nullable: true
      description: Depot ID (optional)
    customerId:
      type: string
      format: uuid
      description: Customer UUID to impersonate
    refreshToken:
      type: string
      description: Valid refresh token

RefreshTokenRequest:
  type: object
  required:
    - token
  properties:
    token:
      type: string
      description: Valid refresh token

# Common Error Schema
Error:
  type: object
  properties:
    error:
      type: string
      description: Error message
    code:
      type: string
      description: Error code (optional)
    details:
      type: object
      description: Additional error details (optional)

# Pagination Schema
PaginationMeta:
  type: object
  properties:
    pageNumber:
      type: integer
      minimum: 1
      description: Current page number
    pageSize:
      type: integer
      minimum: 1
      description: Number of items per page
    totalItems:
      type: integer
      minimum: 0
      description: Total number of items
    totalPages:
      type: integer
      minimum: 0
      description: Total number of pages

# Order Schemas
Product:
  type: object
  required:
    - quantity
  properties:
    id:
      type: string
      description: Product Id - Optional. If not provided, the SKU will be used to find the product.
    sku:
      type: string
      description: Product SKU - Optional. If not provided, the Id will be used to find the product.
    quantity:
      type: integer
      minimum: 1
      description: Quantity

OrderCreateRequest:
  type: object
  required:
    - customerId
    - customerReference
    - printDespatchNote
    - addPackagingToOrder
    - deliveryType
    - addressLine1
    - townOrCity
    - countyOrState
    - postcodeOrZip
    - locationType
    - recipientName
    - recipientEmail
    - recipientNumber
    - products
  properties:
    customerId:
      type: string
      format: uuid
      description: Customer ID (GUID)
    customerReference:
      type: string
      description: Customer reference
    printDespatchNote:
      type: boolean
      description: Print despatch note?
    addPackagingToOrder:
      type: boolean
      description: Add packaging to order?
    deliveryType:
      type: string
      description: Delivery type
    serviceTypeId:
      type: string
      description: Service Type Id - Optional. Either ServiceTypeId or ServiceType must be provided
    serviceType:
      type: string
      description: Service Type - Optional. Either ServiceTypeId or ServiceType must be provided
    vehicleTypeId:
      type: string
      description: Vehicle Type Id - Optional. Either VehicleTypeId or VehicleType must be provided
    vehicleType:
      type: string
      description: Vehicle Type - Optional. Either VehicleTypeId or VehicleType must be provided
    samedayServiceId:
      type: string
      description: Sameday Service Id - Optional. Either SamedayServiceId or SamedayService must be provided
    samedayService:
      type: string
      description: Sameday Service - Optional. Either SamedayServiceId or SamedayService must be provided
    featureId:
      type: string
      description: Feature Id - Optional. Either FeatureId or Feature must be provided
    feature:
      type: string
      description: Feature - Optional. Either FeatureId or Feature must be provided
    companyName:
      type: string
      description: Company name
    addressLine1:
      type: string
      description: Address line 1
    addressLine2:
      type: string
      description: Address line 2
    addressLine3:
      type: string
      description: Address line 3
    townOrCity:
      type: string
      description: Town/city
    countyOrState:
      type: string
      description: County/state
    postcodeOrZip:
      type: string
      description: Postcode/zip
    countryId:
      type: integer
      format: int32
      description: Country ID
    locationType:
      type: string
      description: Location type
    recipientName:
      type: string
      description: Recipient name
    recipientEmail:
      type: string
      format: email
      description: Recipient email
    recipientNumber:
      type: string
      description: Recipient number
    products:
      type: array
      items:
        $ref: '#/Product'
      minItems: 1
      description: List of products

OrderCreateResponse:
  type: string
  format: uuid
  description: DespatchLab fulfillment order ID

# Product Schemas
ProductCreateRequest:
  type: object
  required:
    - customerId
    - sku
    - description
    - type
  properties:
    customerId:
      type: string
      format: uuid
      description: The customer ID this product belongs to
      example: "550e8400-e29b-41d4-a716-446655440000"
    sku:
      type: string
      description: Stock Keeping Unit - unique identifier for the product
      example: "PROD-001"
    description:
      type: string
      description: Product description or title
      example: "Premium Widget 2000"
    barcode:
      type: string
      description: Barcode or EAN for the product (optional)
      example: "1234567890123"
    type:
      type: string
      enum: ["Product", "Bundle"]
      description: Type of product
      default: "Product"

ProductCreateResponse:
  type: object
  properties:
    id:
      type: string
      description: The unique identifier of the created product in DespatchLab
      example: "prod_123456"

Product:
  type: object
  properties:
    id:
      type: string
      description: Unique product identifier
      example: "prod_123456"
    customerId:
      type: string
      format: uuid
      description: Associated customer ID
      example: "550e8400-e29b-41d4-a716-446655440000"
    sku:
      type: string
      description: Stock Keeping Unit
      example: "PROD-001"
    description:
      type: string
      description: Product description
      example: "Premium Widget 2000"
    barcode:
      type: string
      description: Product barcode
      example: "1234567890123"
    type:
      type: string
      enum: ["Product", "Bundle"]
      description: Product type
      example: "Product"
    stockQuantity:
      type: integer
      description: Current stock quantity
      example: 100
    createdAt:
      type: string
      format: date-time
      description: Creation timestamp
      example: "2024-01-15T10:30:00Z"
    updatedAt:
      type: string
      format: date-time
      description: Last update timestamp
      example: "2024-01-15T15:45:00Z"

ProductUpdateRequest:
  type: object
  required:
    - id
    - customerId
    - sku
    - description
    - type
  properties:
    id:
      type: string
      format: uuid
      description: Product unique identifier
      example: "87090000-2cd5-45f2-bd6c-1371eb81e971"
    customerId:
      type: string
      format: uuid
      description: Customer ID this product belongs to
      example: "127911ec-9bfd-45c3-9d4e-e48321991c15"
    customerName:
      type: string
      description: Customer name
      example: "Diamond Test Account"
    sku:
      type: string
      description: Stock Keeping Unit
      example: "TEST-002"
    description:
      type: string
      description: Product description
      example: "Premium Widget 2000"
    type:
      type: string
      enum: ["Product", "Bundle"]
      description: Product type
      example: "Product"
    typeName:
      type: string
      description: Human-readable product type name
      example: "Product"
    barcode:
      type: string
      nullable: true
      description: Product barcode
      example: "002"
    uom:
      type: string
      description: Unit of measure
      example: "Item"
    commodityCode:
      type: string
      nullable: true
      description: Commodity code for customs/shipping
    code2:
      type: string
      nullable: true
      description: Additional product code field
    code3:
      type: string
      nullable: true
      description: Additional product code field
    countryOfOrigin:
      type: string
      nullable: true
      description: Country where the product was manufactured
    costPrice:
      type: number
      description: Cost price of the product
      example: 0
    salesPrice:
      type: number
      description: Sales price of the product
      example: 0
    channelApiIds:
      type: array
      items:
        type: string
      nullable: true
      description: API IDs for various sales channels
    height:
      type: number
      description: Product height in configured units
      example: 1
    width:
      type: number
      description: Product width in configured units
      example: 2
    depth:
      type: number
      description: Product depth in configured units
      example: 3
    volume:
      type: number
      description: Product volume (calculated from dimensions)
      example: 6
    unassembledHeight:
      type: number
      description: Height when unassembled/flat packed
      example: 0
    unassembledWidth:
      type: number
      description: Width when unassembled/flat packed
      example: 0
    unassembledDepth:
      type: number
      description: Depth when unassembled/flat packed
      example: 0
    unassembledVolume:
      type: number
      description: Volume when unassembled/flat packed
      example: 0
    weight:
      type: string
      description: Product weight
      example: "5"
    isSerialNumberIn:
      type: boolean
      description: Whether serial numbers are required on receipt
      example: false
    isSerialNumberOut:
      type: boolean
      description: Whether serial numbers are required on dispatch
      example: false
    isRotationDateAtReceipt:
      type: boolean
      description: Whether rotation date is set at receipt
      example: false
    dateFormat:
      type: string
      nullable: true
      description: Date format for rotation dates
    isBatchNumberRequired:
      type: boolean
      description: Whether batch numbers are required
      example: false
    isPickLinesFromSingleBatch:
      type: boolean
      description: Whether picks must come from a single batch
      example: false
    putawayType:
      type: string
      description: How the product should be stored
      example: "Random"
    putawayTypeName:
      type: string
      description: Human-readable putaway type name
      example: "Random"
    isSameStorageRotation:
      type: boolean
      description: Whether same storage rotation applies
      example: false
    isDifferentStorageRotation:
      type: boolean
      description: Whether different storage rotation applies
      example: false
    isMixWithOtherProducts:
      type: boolean
      description: Whether this product can be mixed with others in storage
      example: true
    minStockholding:
      type: number
      description: Minimum stock level to maintain
      example: 0
    minPickingLevel:
      type: number
      description: Minimum picking level
      example: 0
    maxPickingLevel:
      type: number
      description: Maximum picking level
      example: 0
    grade:
      type: string
      description: Product grade (A, B, C)
      example: "A"
    rotateBy:
      type: string
      enum: ["FIFO", "LIFO", "FEFO"]
      description: Stock rotation method
      example: "FIFO"
    rotateByName:
      type: string
      description: Human-readable rotation method name
      example: "FIFO"
    packagingType:
      type: string
      description: Type of packaging used
      example: "OwnPackaging"
    packagingTypeName:
      type: string
      description: Human-readable packaging type name
      example: "Own Packaging"
    toBeUsedForPrimaryPackaging:
      type: boolean
      description: Whether this product is used for primary packaging
      example: false
    toBeUsedForSecondaryPackaging:
      type: boolean
      description: Whether this product is used for secondary packaging
      example: false
    primaryPackagingSkus:
      type: array
      items:
        type: string
      description: SKUs of products used for primary packaging
      example: []
    secondaryPackagingSkus:
      type: array
      items:
        type: string
      description: SKUs of products used for secondary packaging
      example: []
    primaryPackagingIds:
      type: array
      items:
        type: string
      description: IDs of products used for primary packaging
      example: []
    secondaryPackagingIds:
      type: array
      items:
        type: string
      description: IDs of products used for secondary packaging
      example: []
    bundleProducts:
      type: array
      items:
        type: object
      description: Products included in bundle (if type is Bundle)
      example: []
    isFragile:
      type: boolean
      nullable: true
      description: Whether the product is fragile
    isLiquid:
      type: boolean
      nullable: true
      description: Whether the product is liquid
    isHazardous:
      type: boolean
      nullable: true
      description: Whether the product is hazardous
    requiresSecurity:
      type: boolean
      nullable: true
      description: Whether the product requires special security
    requiresSignature:
      type: boolean
      nullable: true
      description: Whether delivery requires signature
    totalStock:
      type: number
      description: Current total stock level
      example: 0
    usedInOrders:
      type: boolean
      description: Whether the product is currently used in orders
      example: false

ProductUpdateResponse:
  type: string
  format: uuid
  description: The UUID of the updated product
  example: "87090000-2cd5-45f2-bd6c-1371eb81e971"

# Order Detail Schemas
OrderAddress:
  type: object
  properties:
    companyName:
      type: string
      nullable: true
      description: Company name for delivery address
      example: null
    addressLine1:
      type: string
      description: First line of delivery address
      example: "D"
    addressLine2:
      type: string
      nullable: true
      description: Second line of delivery address
      example: null
    addressLine3:
      type: string
      nullable: true
      description: Third line of delivery address
      example: null
    townOrCity:
      type: string
      description: Town or city for delivery
      example: "F"
    countyOrState:
      type: string
      description: County or state for delivery
      example: ""
    postcodeOrZip:
      type: string
      description: Postcode or ZIP code
      example: "E"
    countryId:
      type: integer
      description: Numeric country identifier
      example: 1
    countryName:
      type: string
      description: Full country name
      example: "United Kingdom"
    countryCode:
      type: string
      description: Two-letter country code
      example: "GB"
    addressLocationType:
      type: string
      description: Type of delivery location
      example: "Business"

OrderLine:
  type: object
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier for the order line
      example: "351a0000-94a0-475b-a969-0eecc7dcd4f9"
    productId:
      type: string
      format: uuid
      description: Product identifier in DespatchLab
      example: "2d1a0000-94a0-475b-a969-0eecc7dcd4f9"
    productSku:
      type: string
      description: Product SKU
      example: "MOUSE-WHITE"
    productDescription:
      type: string
      description: Full product description
      example: "Wireless Rechargeable Mouse | Multi-Touch Surface - Mouse White"
    quantity:
      type: integer
      description: Ordered quantity
      example: 1
    productType:
      type: string
      description: Type of product
      example: "Product"
    bundleProducts:
      type: array
      items:
        type: object
      description: Products included if this is a bundle
      example: []
    pickedAt:
      type: string
      nullable: true
      format: date-time
      description: When the item was picked
      example: null
    pickedFrom:
      type: string
      nullable: true
      description: Location picked from
      example: null
    pickedQuantity:
      type: integer
      description: Quantity actually picked
      example: 0
    returnedQuantity:
      type: integer
      description: Quantity returned
      example: 0
    pickableQuantity:
      type: integer
      description: Quantity available to pick
      example: 0
    serialNumbers:
      type: array
      items:
        type: string
      description: Serial numbers for tracked items
      example: []
    batchNumbers:
      type: array
      items:
        type: string
      description: Batch numbers for tracked items
      example: []
    expiryDates:
      type: array
      items:
        type: string
        format: date
      description: Expiry dates for tracked items
      example: []

Order:
  type: object
  properties:
    id:
      type: string
      format: uuid
      description: Unique order identifier
      example: "341a0000-94a0-475b-a969-0eecc7dcd4f9"
    orderDate:
      type: string
      format: date-time
      description: Date and time when order was created
      example: "2025-08-20T16:28:29.4125519"
    customerId:
      type: string
      format: uuid
      description: Customer ID this order belongs to
      example: "127911ec-9bfd-45c3-9d4e-e48321991c15"
    deliveryType:
      type: string
      description: Type of delivery service
      example: "Overnight"
    serviceTypeId:
      type: string
      format: uuid
      description: Service type identifier
      example: "fde829cd-34ed-4df3-b747-3c449d9b5ef9"
    featureId:
      type: string
      format: uuid
      description: Feature identifier for the service
      example: "acedb878-a2e6-4584-a927-f8c0b2d1cb0c"
    vehicleTypeId:
      type: string
      nullable: true
      format: uuid
      description: Vehicle type identifier if applicable
      example: null
    samedayServiceId:
      type: string
      nullable: true
      format: uuid
      description: Same day service identifier if applicable
      example: null
    orderNumber:
      type: string
      description: DespatchLab generated order number
      example: "111000461"
    customerReference:
      type: string
      description: Customer's reference for the order
      example: "#3 order_01K33W4HZYHMC40REVSXX6R75Z"
    recipientName:
      type: string
      description: Name of the recipient
      example: "A B"
    recipientEmail:
      type: string
      format: email
      description: Email address of the recipient
      example: "john@example.co.uk"
    recipientNumber:
      type: string
      description: Phone number of the recipient
      example: "C"
    address:
      $ref: '#/OrderAddress'
    source:
      type: string
      description: Source of the order creation
      example: "Manual"
    status:
      type: string
      description: Current order status (known values include "CantPickAll", "Cancelled")
      example: "CantPickAll"
    statusName:
      type: string
      description: Human-readable status name
      example: "Can't Pick All"
    shipmentId:
      type: string
      nullable: true
      format: uuid
      description: Shipment identifier if shipped
      example: null
    shipmentNumber:
      type: string
      nullable: true
      description: Shipment number if shipped
      example: null
    customerName:
      type: string
      description: Customer name
      example: "Diamond Test Account"
    depotId:
      type: string
      format: uuid
      description: Depot handling the order
      example: "fcb99603-bb6e-47cd-a70c-39f894293499"
    depotName:
      type: string
      description: Name of the depot
      example: "Test Depot"
    serviceTypeName:
      type: string
      description: Human-readable service type name
      example: "Mail"
    featureName:
      type: string
      description: Human-readable feature name
      example: "Standard 48 (Parcel)"
    vehicleTypeName:
      type: string
      nullable: true
      description: Vehicle type name if applicable
      example: null
    samedayServiceName:
      type: string
      nullable: true
      description: Same day service name if applicable
      example: null
    orderLines:
      type: array
      items:
        $ref: '#/OrderLine'
      description: List of items in the order
    isPickFeeEstimated:
      type: boolean
      description: Whether the pick fee is estimated
      example: true
    pickFee:
      type: number
      description: Fee for picking the order
      example: 0
    packagingCharge:
      type: number
      nullable: true
      description: Charge for packaging if applicable
      example: null
    allocatedUserId:
      type: string
      nullable: true
      format: uuid
      description: User allocated to pick the order
      example: null
    allocatedUserName:
      type: string
      nullable: true
      description: Name of allocated user
      example: null
    printDespatchNote:
      type: boolean
      description: Whether to print despatch note
      example: true
    addPackagingToOrder:
      type: boolean
      description: Whether packaging is added to order
      example: false
    isEditable:
      type: boolean
      description: Whether the order can be edited
      example: true
    carrierName:
      type: string
      nullable: true
      description: Name of the carrier if assigned
      example: null
    isSamedayShipment:
      type: boolean
      description: Whether this is a same day shipment
      example: false
    lastestTracking:
      type: string
      nullable: true
      description: Latest tracking information
      example: null
    expectedDeliveryDate:
      type: string
      nullable: true
      format: date
      description: Expected delivery date
      example: null
    canDownloadDespatchNote:
      type: boolean
      description: Whether despatch note can be downloaded
      example: false
    canAllocatePicker:
      type: boolean
      description: Whether a picker can be allocated
      example: true
    canCancelOrder:
      type: boolean
      description: Whether the order can be cancelled
      example: true
    isInvoiced:
      type: boolean
      description: Whether the order has been invoiced
      example: false
    orderValue:
      type: number
      nullable: true
      description: Total value of the order
      example: null
